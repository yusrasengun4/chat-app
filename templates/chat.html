{% extends "base.html" %}
{% block title %}Sohbet{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6 h-screen">
  <div class="grid grid-cols-12 gap-4 h-full">

    <!-- SOL PANEL: KullanÄ±cÄ±lar ve Gruplar -->
    <div class="col-span-3 bg-white rounded-lg shadow-lg flex flex-col">
      <div class="bg-blue-600 text-white p-4 rounded-t-lg">
        <h2 class="text-xl font-bold"><i class="fas fa-comments"></i> Sohbetler</h2>
      </div>

      <div class="flex-1 overflow-y-auto p-4 space-y-4">
        <!-- KullanÄ±cÄ±lar -->
        <div>
          <h3 class="text-lg font-semibold mb-2">KullanÄ±cÄ±lar</h3>
          <div id="users-list" class="space-y-2"></div>
        </div>

        <!-- Gruplar -->
        <div class="mt-6">
          <h3 class="text-lg font-semibold mb-2 flex justify-between items-center">
            Gruplar
            <button id="create-group-btn" class="bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 text-sm">
              â• Yeni Grup
            </button>
          </h3>
          <div id="groups-list" class="space-y-2"></div>
        </div>

        <!-- Broadcast -->
        <button id="broadcast-btn" class="mt-6 w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">
          ğŸ“¡ Herkese Mesaj
        </button>
      </div>
    </div>

    <!-- SAÄ PANEL: Mesajlar -->
    <div class="col-span-9 bg-white rounded-lg shadow-lg flex flex-col">
      <!-- BaÅŸlÄ±k -->
      <div class="bg-blue-600 text-white p-4 rounded-t-lg flex justify-between items-center">
        <div>
          <h2 id="chat-title" class="text-xl font-bold"><i class="fas fa-comment-dots"></i> Sohbet SeÃ§in</h2>
          <p id="chat-subtitle" class="text-sm text-blue-200"></p>
        </div>
      </div>

      <!-- Mesajlar -->
      <div id="messages" class="flex-1 p-4 bg-gray-50 overflow-y-auto">
        <div class="text-center text-gray-500 mt-20">
          <i class="fas fa-comments text-6xl mb-4"></i>
          <p class="text-lg">Sohbet baÅŸlatmak iÃ§in bir kullanÄ±cÄ± veya grup seÃ§in</p>
        </div>
      </div>

      <!-- Mesaj GÃ¶nderme -->
      <div class="p-4 border-t bg-white rounded-b-lg">
        <form id="message-form" class="flex space-x-2">
          <input id="message-input" type="text" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..."
                 class="flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" disabled>
          <button id="send-btn" type="submit"
                  class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition disabled:bg-gray-400"
                  disabled>
            <i class="fas fa-paper-plane"></i> GÃ¶nder
          </button>
        </form>
      </div>
    </div>

  </div>
</div>

<!-- Grup OluÅŸturma Modal -->
<div id="group-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-lg shadow-xl w-80">
    <h3 class="text-lg font-semibold mb-3">Yeni Grup OluÅŸtur</h3>
    <form id="create-group-form">
      <input type="text" id="group-name" placeholder="Grup AdÄ±" required
             class="border rounded w-full p-2 mb-2">
      <textarea id="group-description" placeholder="AÃ§Ä±klama (isteÄŸe baÄŸlÄ±)"
                class="border rounded w-full p-2 mb-2"></textarea>
      <div class="flex justify-end gap-2">
        <button type="button" id="cancel-group-btn"
                class="bg-gray-300 px-3 py-1 rounded hover:bg-gray-400">Ä°ptal</button>
        <button type="submit"
                class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600">OluÅŸtur</button>
      </div>
    </form>
  </div>
</div>

<!-- JS dosyasÄ± -->
<script src="{{ url_for('static', filename='js/chat.js') }}"></script>
{% endblock %}
